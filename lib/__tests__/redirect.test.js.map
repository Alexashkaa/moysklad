{"version":3,"sources":["../../src/__tests__/redirect.test.js"],"names":["test","require","nodeFetch","Moysklad","t","ms","fetch","body","template","meta","href","type","mediaType","extension","POST","includeHeaders","muteErrors","headers","result","response","ok","get","equal","undefined","status"],"mappings":"AAAA;;;;;;AAEA,MAAMA,OAAOC,QAAQ,WAAR,CAAb;AACA,MAAMC,YAAYD,QAAQ,YAAR,CAAlB;AACA,MAAME,WAAWF,QAAQ,IAAR,CAAjB;;AAEAD,KAAK,kCAAL;AAAA,+BAAyC,WAAMI,CAAN,EAAW;AAClD,UAAMC,KAAKF,SAAS;AAClBG,aAAOJ;AADW,KAAT,CAAX;;AAIA,QAAIK,OAAO;AACTC,gBAAU;AACRC,cAAM;AACJC,gBAAM,oFACJ,sCAFE;AAGJC,gBAAM,gBAHF;AAIJC,qBAAW;AAJP;AADE,OADD;AASTC,iBAAW;AATF,KAAX;;AALkD,gBAiBhB,MAAMR,GACrCS,IADqC,CAChC,4DADgC,EAC8BP,IAD9B,EACoC,IADpC,EAC0C;AAC9EQ,sBAAgB,IAD8D;AAE9EC,kBAAY;AAFkE,KAD1C,CAjBU;AAAA;;AAAA,QAiB7CC,OAjB6C;AAAA,QAiBpCC,MAjBoC;AAAA,QAiB5BC,QAjB4B;;;AAuBlDf,MAAEgB,EAAF,CAAKH,QAAQI,GAAb,EAAkB,gCAAlB;AACAjB,MAAEgB,EAAF,CAAK,yCAAyCpB,IAAzC,CAA8CiB,QAAQI,GAAR,CAAY,UAAZ,CAA9C,CAAL,EACE,oDADF;AAEAjB,MAAEkB,KAAF,CAAQJ,MAAR,EAAgBK,SAAhB,EAA2B,+BAA3B;AACAnB,MAAEkB,KAAF,CAAQH,SAASK,MAAjB,EAAyB,GAAzB,EAA8B,kCAA9B;AACD,GA5BD;;AAAA;AAAA;AAAA;AAAA","file":"redirect.test.js","sourcesContent":["'use strict'\n\nconst test = require('blue-tape')\nconst nodeFetch = require('node-fetch')\nconst Moysklad = require('..')\n\ntest('Array response with muted errors', async t => {\n  const ms = Moysklad({\n    fetch: nodeFetch\n  })\n\n  let body = {\n    template: {\n      meta: {\n        href: 'https://online.moysklad.ru/api/remap/1.1/entity/demand/metadata/customtemplate/' +\n          '8a686b8a-9e4a-11e5-7a69-97110004af3e',\n        type: 'customtemplate',\n        mediaType: 'application/json'\n      }\n    },\n    extension: 'pdf'\n  }\n\n  let [headers, result, response] = await ms\n    .POST('entity/demand/773e16c5-ef53-11e6-7a69-9711001669c5/export/', body, null, {\n      includeHeaders: true,\n      muteErrors: true\n    })\n\n  t.ok(headers.get, 'headers should have get method')\n  t.ok(/https:\\/\\/120708.selcdn.ru\\/prod-files/.test(headers.get('location')),\n    'headers Location header should contain url to from')\n  t.equal(result, undefined, 'result should to be undefined')\n  t.equal(response.status, 307, 'response.status should to be 307')\n})\n"]}