{"version":3,"sources":["../../src/extensions/createAttr.js"],"names":["stampit","require","have","createMetaStamp","createAttr","args","parsedArgs","strict","id","entityId","value","name","argumentsObject","attr","meta","createMeta","hasOwnProperty","module","exports","init","bind","compose"],"mappings":"AAAA;;AAEA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,OAAOD,QAAQ,SAAR,CAAb;AACA,IAAME,kBAAkBF,QAAQ,cAAR,CAAxB;;AAEA;AACA;AACA;;AAEA,SAASG,UAAT,GAA8B;AAAA,oCAANC,IAAM;AAANA,QAAM;AAAA;;AAC5B,MAAIC,aAAaJ,KAAKK,MAAL,CAAYF,IAAZ,EAAkB,CACjC,EAAEG,IAAI,MAAN,EAAcC,UAAU,WAAxB,EADiC,EAEjC,EAAED,IAAI,MAAN,EAAcE,OAAO,oBAArB,EAFiC,EAGjC,EAAEF,IAAI,MAAN,EAAcG,MAAM,KAApB,EAHiC,EAIjCT,KAAKU,eAJ4B,CAAlB,CAAjB;;AAOA,MAAIC,OAAO,EAAEL,IAAIF,WAAWE,EAAjB,EAAX;;AAEA,MAAIF,WAAWG,QAAf,EAAyB;AACvBI,SAAKH,KAAL,GAAa;AACXI,YAAM,KAAKC,UAAL,CAAgB,cAAhB,EAAgC,CAAC,qBAAD,EAAwBT,WAAWG,QAAnC,CAAhC;AADK,KAAb;AAGD,GAJD,MAIO,IAAIH,WAAWU,cAAX,CAA0B,OAA1B,CAAJ,EAAwC;AAC7CH,SAAKH,KAAL,GAAaJ,WAAWI,KAAxB;AACD,GAFM,MAEA;AACLG,SAAKH,KAAL,GAAa;AACXI,YAAM;AACJH,cAAML,WAAWK;AADb;AADK,KAAb;AAKD;;AAED,SAAOE,IAAP;AACD;;AAEDI,OAAOC,OAAP,GAAiBlB,QAAQmB,IAAR,CAAa,YAAY;AACxC,OAAKf,UAAL,GAAkBA,WAAWgB,IAAX,CAAgB,IAAhB,CAAlB;AACD,CAFgB,EAEdC,OAFc,CAENlB,eAFM,CAAjB","file":"createAttr.js","sourcesContent":["'use strict'\n\nconst stampit = require('stampit')\nconst have = require('../have')\nconst createMetaStamp = require('./createMeta')\n\n// client.createAttr(СТАТУС, В_РАБОТЕ)\n// client.createAttr(ОБЩИЙ_ЗАКАЗ, 'NA-ord-13023')\n// client.createAttr({ id: СТАТУС, name: 'В работе' })\n\nfunction createAttr (...args) {\n  let parsedArgs = have.strict(args, [\n    { id: 'uuid', entityId: 'uuid/uuid' },\n    { id: 'uuid', value: 'str or num or date' },\n    { id: 'uuid', name: 'str' },\n    have.argumentsObject\n  ])\n\n  let attr = { id: parsedArgs.id }\n\n  if (parsedArgs.entityId) {\n    attr.value = {\n      meta: this.createMeta('customentity', ['entity/customentity', parsedArgs.entityId])\n    }\n  } else if (parsedArgs.hasOwnProperty('value')) {\n    attr.value = parsedArgs.value\n  } else {\n    attr.value = {\n      meta: {\n        name: parsedArgs.name\n      }\n    }\n  }\n\n  return attr\n}\n\nmodule.exports = stampit.init(function () {\n  this.createAttr = createAttr.bind(this)\n}).compose(createMetaStamp)\n"]}