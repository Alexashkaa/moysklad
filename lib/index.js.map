{"version":3,"sources":["../src/index.js"],"names":["stampit","require","have","getTimeString","parseTimeString","getAuthHeader","buildUri","parseUri","fetchUri","GET","POST","PUT","DELETE","module","exports","methods","statics","init","options","_options","endpoint","api","apiVersion","fetch","Error","emitter","Object","assign","getOptions"],"mappings":"AAAA;;;;;;;;AAQA;;AAEA,MAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,MAAMC,OAAOD,QAAQ,QAAR,CAAb;;AAEA;AACA,MAAME,gBAAgBF,QAAQ,uBAAR,CAAtB;AACA,MAAMG,kBAAkBH,QAAQ,yBAAR,CAAxB;AACA,MAAMI,gBAAgBJ,QAAQ,yBAAR,CAAtB;AACA,MAAMK,WAAWL,QAAQ,oBAAR,CAAjB;AACA,MAAMM,WAAWN,QAAQ,oBAAR,CAAjB;AACA,MAAMO,WAAWP,QAAQ,oBAAR,CAAjB;AACA,MAAMQ,MAAMR,QAAQ,eAAR,CAAZ;AACA,MAAMS,OAAOT,QAAQ,gBAAR,CAAb;AACA,MAAMU,MAAMV,QAAQ,eAAR,CAAZ;AACA,MAAMW,SAASX,QAAQ,kBAAR,CAAf;;AAEAY,OAAOC,OAAP,GAAiBd,QAAQ;AACvB;AACAe,WAAS;AACPV,gCADO;AAEPC,sBAFO;AAGPC,sBAHO;AAIPC,sBAJO;AAKPC,YALO;AAMPC,cANO;AAOPC,YAPO;AAQPC;AARO,GAFc;AAYvBI,WAAS;AACPb,gCADO;AAEPC;AAFO;AAZc,CAAR,EAiBda,IAjBc,CAiBT,UAAUC,OAAV,EAAmB;AACvB,MAAIC,QAAJ;;AAEAjB,OAAKgB,OAAL,EAAc;AACZE,cAAU,SADE;AAEZC,SAAK,SAFO;AAGZC,gBAAY;;AAEZ;AACA;AACA;AACA;AACA;AACA;AAVY,GAAd;;AAaA,MAAIJ,QAAQK,KAAZ,EAAmB;AACjB,SAAKA,KAAL,GAAaL,QAAQK,KAArB;AACD,GAFD,MAEO,IAAI,OAAOA,KAAP,KAAiB,WAArB,EAAkC;AACvC,SAAKA,KAAL,GAAaA,KAAb;AACD,GAFM,MAEA;AACL,UAAM,IAAIC,KAAJ,CAAU,gCACf,6DADK,CAAN;AAED;;AAED,MAAIN,QAAQO,OAAZ,EAAqB;AACnB,SAAKA,OAAL,GAAeP,QAAQO,OAAvB;AACD;;AAEDN,aAAWO,OAAOC,MAAP,CAAc;AACvBP,cAAU,gCADa;AAEvBC,SAAK,OAFkB;AAGvBC,gBAAY;AAHW,GAAd,EAIRJ,OAJQ,CAAX;;AAMA,OAAKU,UAAL,GAAkB,YAAY;AAC5B,WAAOT,QAAP;AACD,GAFD;AAGD,CAvDc,CAAjB","file":"index.js","sourcesContent":["/*\n * moysklad\n * Клиент для JSON API МойСклад\n *\n * Copyright (c) 2017, Vitaliy V. Makeev\n * Licensed under MIT.\n */\n\n'use strict'\n\nconst stampit = require('stampit')\nconst have = require('./have')\n\n// methods\nconst getTimeString = require('./tools/getTimeString')\nconst parseTimeString = require('./tools/parseTimeString')\nconst getAuthHeader = require('./methods/getAuthHeader')\nconst buildUri = require('./methods/buildUri')\nconst parseUri = require('./methods/parseUri')\nconst fetchUri = require('./methods/fetchUri')\nconst GET = require('./methods/GET')\nconst POST = require('./methods/POST')\nconst PUT = require('./methods/PUT')\nconst DELETE = require('./methods/DELETE')\n\nmodule.exports = stampit({\n  // TODO bind methods to this\n  methods: {\n    getAuthHeader,\n    buildUri,\n    parseUri,\n    fetchUri,\n    GET,\n    POST,\n    PUT,\n    DELETE\n  },\n  statics: {\n    getTimeString,\n    parseTimeString\n  }\n})\n  .init(function (options) {\n    let _options\n\n    have(options, {\n      endpoint: 'opt str',\n      api: 'opt str',\n      apiVersion: 'opt str'\n\n      // TODO fix have object arguments parsing\n      // login: 'opt str',\n      // password: 'opt str',\n      // fetch: 'opt function'\n      // queue: 'opt bool',\n      // emitter: 'opt obj'\n    })\n\n    if (options.fetch) {\n      this.fetch = options.fetch\n    } else if (typeof fetch !== 'undefined') {\n      this.fetch = fetch\n    } else {\n      throw new Error('Не указан Fetch API модуль.' +\n       'Подробнее см. https://github.com/wmakeev/moysklad#Установка')\n    }\n\n    if (options.emitter) {\n      this.emitter = options.emitter\n    }\n\n    _options = Object.assign({\n      endpoint: 'https://online.moysklad.ru/api',\n      api: 'remap',\n      apiVersion: '1.1'\n    }, options)\n\n    this.getOptions = function () {\n      return _options\n    }\n  })\n\n"]}